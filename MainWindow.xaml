<Window x:Class="Journal.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Journal"
        Height="650" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#F0F0F0"
        Loaded="Window_Loaded">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock x:Name="HeaderText" 
                   Text="JOURNAL" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   Margin="5" 
                   HorizontalAlignment="Center"
                   Foreground="#2C3E50"/>


        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="5" 
                Padding="10" 
                Margin="0,5,0,10"
                BorderBrush="#BDC3C7"
                BorderThickness="1">
            <StackPanel>
                <TextBlock Text="Выберите действие:" 
                           FontWeight="Bold" 
                           Margin="0,0,0,5"
                           Foreground="#34495E"/>

                <WrapPanel Margin="0,5">
                    <Button Content="Обновить все журналы" 
                            x:Name="btnUpdateAll"
                            Click="BtnUpdateAll_Click"
                            Padding="15,8" 
                            Margin="0,0,10,5"
                            Background="#3498DB" 
                            Foreground="White"/>

                    <Button Content="Только EXE (client.txt)" 
                            x:Name="btnUpdateExe"
                            Click="BtnUpdateExe_Click"
                            Padding="15,8" 
                            Margin="0,0,10,5"
                            Background="#2ECC71" 
                            Foreground="White"/>

                    <Button Content="Только удаленные EXE" 
                            x:Name="btnUpdateDeleted"
                            Click="BtnUpdateDeleted_Click"
                            Padding="15,8" 
                            Margin="0,0,10,5"
                            Background="#E74C3C" 
                            Foreground="White"/>

                    <Button Content="Сбросить выделение" 
                            x:Name="btnClearSelection"
                            Click="BtnClearSelection_Click"
                            Padding="15,8" 
                            Margin="0,0,10,5"
                            Background="#95A5A6" 
                            Foreground="White"/>

                    <Button Content="Поиск пути (Ctrl+P)" 
                            x:Name="btnPathSearch"
                            Click="BtnPathSearch_Click"
                            Padding="15,8" 
                            Margin="0,0,10,5"
                            Background="#F39C12" 
                            Foreground="White"
                            FontWeight="Bold"/>
                </WrapPanel>

                <Separator Margin="0,10"/>

                <WrapPanel Margin="0,5">
                    <TextBlock Text="Выберите журнал для просмотра:" 
                               VerticalAlignment="Center" 
                               Margin="0,0,10,0"
                               Foreground="#34495E"/>

                    <RadioButton Content="Все журналы" 
                                 x:Name="rbAllJournal"
                                 GroupName="JournalType"
                                 IsChecked="True"
                                 Margin="0,0,15,0"
                                 Checked="RbJournal_Checked"
                                 Foreground="#2C3E50"/>

                    <RadioButton Content="Только EXE (client.txt)" 
                                 x:Name="rbExeJournal"
                                 GroupName="JournalType"
                                 Margin="0,0,15,0"
                                 Checked="RbJournal_Checked"
                                 Foreground="#2C3E50"/>

                    <RadioButton Content="Удаленные EXE" 
                                 x:Name="rbDeletedExeJournal"
                                 GroupName="JournalType"
                                 Margin="0,0,15,0"
                                 Checked="RbJournal_Checked"
                                 Foreground="#2C3E50"/>

                    <Button Content="Обновить просмотр" 
                            x:Name="btnRefresh"
                            Click="BtnRefresh_Click"
                            Padding="10,5"
                            Background="#95A5A6" 
                            Foreground="White"/>
                </WrapPanel>

                <TextBlock x:Name="txtStatus" 
                           Text="Готов к работе" 
                           Foreground="#27AE60" 
                           Margin="0,5"
                           FontStyle="Italic"/>
            </StackPanel>
        </Border>

        <DataGrid x:Name="dgJournal" 
                  Grid.Row="2"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  AlternatingRowBackground="#ECF0F1"
                  Background="White"
                  BorderBrush="#BDC3C7"
                  BorderThickness="1"
                  Margin="0,0,0,10"
                  FontSize="12"
                  GridLinesVisibility="Horizontal"
                  SelectionMode="Single"
                  SelectionUnit="FullRow">

            <DataGrid.Columns>
                <DataGridTextColumn Header="USN" Binding="{Binding USN}" Width="80"/>
                <DataGridTextColumn Header="Имя файла" Binding="{Binding FileName}" Width="200"/>
                <DataGridTextColumn Header="Путь к файлу" Binding="{Binding FilePath}" Width="350"/>
                <DataGridTextColumn Header="Операция" Binding="{Binding Reason}" Width="200"/>
                <DataGridTextColumn Header="Время" Binding="{Binding FormattedTime}" Width="130"/>
            </DataGrid.Columns>

            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="Background" Value="White"/>
                    <Style.Triggers>
                        <Trigger Property="AlternationIndex" Value="1">
                            <Setter Property="Background" Value="#ECF0F1"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <Border Grid.Row="3" 
                Background="#34495E" 
                CornerRadius="5" 
                Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="txtFileInfo" 
                           Text="Журнал: не выбран" 
                           Foreground="White"
                           VerticalAlignment="Center"/>

                <TextBlock x:Name="txtUserModeInfo" 
                           Grid.Column="1"
                           Text="" 
                           Foreground="#F39C12"
                           FontWeight="Bold"
                           Margin="10,0"
                           VerticalAlignment="Center"
                           Visibility="Collapsed"/>

                <TextBlock x:Name="txtCountInfo" 
                           Grid.Column="2"
                           Text="Записей: 0" 
                           Foreground="#F1C40F"
                           FontWeight="Bold"
                           Margin="10,0"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>